From ab92c7c30ab23387bf5bc54bc888c0820d376146 Mon Sep 17 00:00:00 2001
From: Ryan Ray <ryan314r@gmail.com>
Date: Fri, 5 Apr 2024 00:07:35 -0600
Subject: [PATCH] Compatability and error handling fixes

---
 src/main/java/pro/trevor/tankgame/Cli.java                    | 4 ++--
 src/main/java/pro/trevor/tankgame/Main.java                   | 2 +-
 .../tankgame/rule/definition/player/PlayerActionRule.java     | 2 +-
 3 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/src/main/java/pro/trevor/tankgame/Cli.java b/src/main/java/pro/trevor/tankgame/Cli.java
index 201fe1f..17a6195 100644
--- a/src/main/java/pro/trevor/tankgame/Cli.java
+++ b/src/main/java/pro/trevor/tankgame/Cli.java
@@ -44,7 +44,7 @@ public class Cli {
                         api.ingestState(json);
                         output.println(response("state successfully ingested", false));
                     } catch (Throwable throwable) {
-                        output.println(response("failed to ingest state", true));
+                        output.println(response(throwable.getMessage(), true));
                         throwable.printStackTrace();
                     }
                 }
@@ -53,7 +53,7 @@ public class Cli {
                         api.ingestAction(json);
                         output.println(response("action successfully ingested", false));
                     } catch (Throwable throwable) {
-                        output.println(response("failed to ingest action", true));
+                        output.println(response(throwable.getMessage(), true));
                         throwable.printStackTrace();
                     }
                 }
diff --git a/src/main/java/pro/trevor/tankgame/Main.java b/src/main/java/pro/trevor/tankgame/Main.java
index 9477b89..dc40cdb 100644
--- a/src/main/java/pro/trevor/tankgame/Main.java
+++ b/src/main/java/pro/trevor/tankgame/Main.java
@@ -10,7 +10,7 @@ import java.nio.file.Files;
 
 public class Main {
 
-    public static final boolean DEBUG = true;
+    public static final boolean DEBUG = false;
 
     public static void main(String[] args) {
 
diff --git a/src/main/java/pro/trevor/tankgame/rule/definition/player/PlayerActionRule.java b/src/main/java/pro/trevor/tankgame/rule/definition/player/PlayerActionRule.java
index b54ff57..2ca2fb5 100644
--- a/src/main/java/pro/trevor/tankgame/rule/definition/player/PlayerActionRule.java
+++ b/src/main/java/pro/trevor/tankgame/rule/definition/player/PlayerActionRule.java
@@ -38,7 +38,7 @@ public class PlayerActionRule<T extends IPlayerElement> implements IPlayerRule<T
                 error.put("subject", subject.getPlayer());
             }
 
-            System.out.println(error.toString(2));
+            System.err.println(error.toString(2));
             throw new Error(String.format("Failed to apply `%s` to `%s` given `%s`", name, subject, Arrays.toString(meta)));
         }
     }
-- 
2.34.1

